<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>لانا براند - المنتجات</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    background: #f9f9f9;
  }
  header {
    background: #007b8f;
    color: white;
    padding: 10px 15px;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
  }
  header:hover {
    background: #005f68;
  }
  .filters {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin: 15px 0 10px;
  }
  .filters button {
    background-color: #007b8f;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
  }
  .filters button:hover,
  .filters button.active {
    background-color: #005f68;
  }
  .search-box {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
  }
  .search-box input {
    padding: 10px;
    width: 90%;
    max-width: 400px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  .products {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    padding: 0 15px 40px;
  }
  .product {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    padding: 15px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 420px;
    transition: transform 0.2s;
  }
  .product:hover {
    transform: scale(1.02);
  }
  .product img {
    max-width: 100%;
    max-height: 200px;
    object-fit: contain;
    margin-bottom: 12px;
  }
  .product h3 {
    font-size: 20px;
    margin: 8px 0 5px;
    text-align: center;
  }
  .product p {
    font-size: 14px;
    margin: 3px 0;
    text-align: center;
  }
  .cart-sidebar {
    position: fixed;
    top: 50%;
    right: 0;
    transform: translateY(-50%);
    background-color: #007b8f;
    border-radius: 15px 0 0 15px;
    padding: 15px 12px;
    width: 110px;
    text-align: center;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 12px rgb(0 123 143 / 0.7);
    z-index: 1000;
  }
  .cart-sidebar:hover {
    background-color: #005f68;
  }
  .cart-sidebar .cart-icon {
    font-size: 36px;
    margin-bottom: 8px;
  }
  .cart-sidebar .cart-count {
    font-size: 18px;
    font-weight: bold;
  }
  .cart-sidebar .cart-total {
    font-size: 18px;
    margin-top: 8px;
    font-weight: bold;
  }

  /* النافذة المنبثقة */
  #modal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 2000;
  }
  #modal .modal-content {
    background: white;
    border-radius: 12px;
    max-width: 500px;
    width: 90%;
    padding: 20px 25px;
    box-sizing: border-box;
    text-align: center;
    position: relative;
  }
  #modal img {
    max-width: 100%;
    max-height: 220px;
    object-fit: contain;
    margin-bottom: 15px;
  }
  #modal h2 {
    margin: 8px 0 12px;
    font-size: 24px;
  }
  #modal p.description {
    font-size: 16px;
    margin-bottom: 15px;
    color: #333;
  }
  #modal p.price {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 15px;
  }
  #modal .qty-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
  }
  #modal .qty-controls button {
    background-color: #007b8f;
    border: none;
    color: white;
    font-size: 22px;
    width: 40px;
    height: 40px;
    border-radius: 10px;
    cursor: pointer;
    user-select: none;
  }
  #modal .qty-controls span {
    font-size: 20px;
    width: 40px;
    text-align: center;
    display: inline-block;
  }
  #modal button.add-to-cart {
    background-color: #007b8f;
    border: none;
    color: white;
    font-size: 18px;
    padding: 12px 30px;
    border-radius: 10px;
    cursor: pointer;
  }
  #modal button.add-to-cart:hover {
    background-color: #005f68;
  }
  #modal .close-btn {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }
  #modal .close-btn:hover {
    color: #555;
  }
</style>
</head>
<body>

<header id="home-link">لانا براند</header>

<div class="filters">
  <button class="filter-btn active" data-category="all">كل المنتجات</button>
  <button class="filter-btn" data-category="soap">الصابون</button>
  <button class="filter-btn" data-category="shampoo">الشامبو</button>
  <button class="filter-btn" data-category="oil">الزيوت</button>
  <button class="filter-btn" data-category="cream">الكريمات</button>
</div>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="ابحث عن منتج..." />
</div>

<div class="products" id="product-list">
  <!-- المنتجات تظهر هنا -->
</div>

<div class="cart-sidebar" id="cart-sidebar" title="اذهب إلى سلة المشتريات">
  <div class="cart-icon">🛒</div>
  <div class="cart-count" id="cart-count">0</div>
  <div class="cart-total" id="total-price">0 د.ع</div>
</div>

<!-- النافذة المنبثقة -->
<div id="modal">
  <div class="modal-content">
    <div class="close-btn" id="modal-close">&times;</div>
    <img id="modal-img" src="" alt="صورة المنتج" />
    <h2 id="modal-title">اسم المنتج</h2>
    <p class="description" id="modal-desc">وصف المنتج</p>
    <p class="price" id="modal-price">0 د.ع</p>
    <div class="qty-controls">
      <button id="qty-minus">-</button>
      <span id="modal-qty">1</span>
      <button id="qty-plus">+</button>
    </div>
    <button class="add-to-cart" id="add-to-cart-btn">أضف إلى السلة</button>
  </div>
</div>

<script>
  const products = [
    {
      name: "صابون طبيعي",
      category: "soap",
      price: 12000,
      desc: "صابون طبيعي 100% مصنوع من زيوت نباتية.",
      image: "https://i.imgur.com/WPq6FcI.jpg"
    },
    {
      name: "شامبو مغذي",
      category: "shampoo",
      price: 22000,
      desc: "شامبو مغذي مناسب لجميع أنواع الشعر.",
      image: "https://i.imgur.com/mBOxP3v.jpg"
    },
    {
      name: "زيت الأرجان",
      category: "oil",
      price: 35000,
      desc: "زيت الأرجان الطبيعي لترطيب وتغذية الشعر والبشرة.",
      image: "https://i.imgur.com/T0vB7yT.jpg"
    },
    {
      name: "كريم مرطب",
      category: "cream",
      price: 18000,
      desc: "كريم مرطب للبشرة الجافة مع فيتامين E.",
      image: "https://i.imgur.com/YS0O0V6.jpg"
    },
    {
      name: "صابون العسل",
      category: "soap",
      price: 15000,
      desc: "صابون بالعسل الطبيعي لتنظيف وترطيب البشرة.",
      image: "https://i.imgur.com/dWgqO06.jpg"
    },
    {
      name: "شامبو الأعشاب",
      category: "shampoo",
      price: 24000,
      desc: "شامبو بالأعشاب الطبيعية لتقوية الشعر.",
      image: "https://i.imgur.com/H2D0Apu.jpg"
    }
  ];

  let cart = {};

  // تحديث عرض المنتجات
  function displayProducts(filter = 'all', searchTerm = '') {
    const list = document.getElementById('product-list');
    list.innerHTML = '';
    let filtered = products.filter(p => (filter === 'all' || p.category === filter) &&
                                       p.name.includes(searchTerm));
    filtered.forEach((p, index) => {
      const prodDiv = document.createElement('div');
      prodDiv.className = 'product';
      prodDiv.innerHTML = `
        <img src="${p.image}" alt="${p.name}" />
        <h3>${p.name}</h3>
        <p>${p.desc}</p>
        <p><strong>${p.price.toLocaleString()} د.ع</strong></p>
      `;
      prodDiv.onclick = () => openModal(index);
      list.appendChild(prodDiv);
    });
  }

  // فتح النافذة المنبثقة للمنتج
  function openModal(index) {
    const modal = document.getElementById('modal');
    modal.style.display = 'flex';
    const prod = products[index];
    document.getElementById('modal-img').src = prod.image;
    document.getElementById('modal-title').textContent = prod.name;
    document.getElementById('modal-desc').textContent = prod.desc;
    document.getElementById('modal-price').textContent = prod.price.toLocaleString() + ' د.ع';
    document.getElementById('modal-qty').textContent = '1';
    document.getElementById('add-to-cart-btn').dataset.index = index;
  }

  // إغلاق النافذة المنبثقة
  document.getElementById('modal-close').onclick = () => {
    document.getElementById('modal').style.display = 'none';
  };

  // تغيير الكمية داخل النافذة
  document.getElementById('qty-plus').onclick = () => {
    let qtySpan = document.getElementById('modal-qty');
    let qty = parseInt(qtySpan.textContent);
    qty++;
    qtySpan.textContent = qty;
  };
  document.getElementById('qty-minus').onclick = () => {
    let qtySpan = document.getElementById('modal-qty');
    let qty = parseInt(qtySpan.textContent);
    if (qty > 1) {
      qty--;
      qtySpan.textContent = qty;
    }
  };

  // إضافة المنتج للسلة
  document.getElementById('add-to-cart-btn').onclick = function() {
    let index = this.dataset.index;
    let qty = parseInt(document.getElementById('modal-qty').textContent);
    if (cart[index]) {
      cart[index].quantity += qty;
    } else {
      cart[index] = {
        product: products[index],
        quantity: qty
      };
    }
    updateCartSidebar();
    document.getElementById('modal').style.display = 'none';
  };

  // تحديث محتويات السلة الجانبية
  function updateCartSidebar() {
    const countEl = document.getElementById('cart-count');
    const totalEl = document.getElementById('total-price');
    let totalQty = 0;
    let totalPrice = 0;
    for (const key in cart) {
      totalQty += cart[key].quantity;
      totalPrice += cart[key].quantity * cart[key].product.price;
    }
    countEl.textContent = totalQty;
    totalEl.textContent = totalPrice.toLocaleString() + ' د.ع';
  }

  // تصفية المنتجات عند الضغط على الأقسام
  const filterButtons = document.querySelectorAll('.filter-btn');
  filterButtons.forEach(btn => {
    btn.onclick = () => {
      filterButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const category = btn.dataset.category;
      const searchVal = document.getElementById('searchInput').value.trim();
      displayProducts(category, searchVal);
    };
  });

  // البحث الحي
  document.getElementById('searchInput').addEventListener('input', () => {
    const activeBtn = document.querySelector('.filter-btn.active');
    const category = activeBtn ? activeBtn.dataset.category : 'all';
    const searchVal = document.getElementById('searchInput').value.trim();
    displayProducts(category, searchVal);
  });

  // الذهاب للرئيسية عند الضغط على العنوان
  document.getElementById('home-link').onclick = () => {
    window.location.href = 'index.html';
  };

  // الذهاب إلى صفحة السلة عند الضغط على السلة الجانبية
  document.getElementById('cart-sidebar').onclick = () => {
    window.location.href = 'cart.html';
  };

  // عرض كل المنتجات في البداية
  displayProducts();

</script>

</body>
</html>